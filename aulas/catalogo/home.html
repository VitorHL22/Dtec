<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catálogo de Livros - Editora</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: Arial, sans-serif; background: #f9f9f9; line-height: 1.6; }

  /* Navbar */
  nav { background: #2499c7; color: black; display: flex; justify-content: space-between; align-items: center; padding: 15px 30px; top: 0; z-index: 1000; }
  nav .logo { font-size: 1.6rem; font-weight: bold;; }
  nav ul { list-style: none; display: flex; gap: 25px; }
  nav ul li a { color: black; text-decoration: none; font-weight: 600; }
  nav ul li a:hover { color: grey; }
  .imagem img { height: 60px; }
  /* Carrossel */
  .banner-container { position: relative; overflow: hidden; height: 400px; margin: 30px auto; max-width: 900px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); }
  .banner { display: flex; transition: transform 0.6s ease-in-out; width: 100%; }
  .banner img { flex: 0 0 100%; height: 400px; object-fit: cover; border-radius: 12px; }
  .banner-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; padding: 15px; cursor: pointer; font-size: 20px; border-radius: 50%; }
  .banner-btn.prev { left: 15px; }
  .banner-btn.next { right: 15px; }

  /* Seção */
  .section { padding: 50px 20px; text-align: center; }
  .section h2 { font-size: 2.2rem; margin-bottom: 25px; }
  .livros-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; max-width: 1200px; margin: auto; }
  .card { background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.15); overflow: hidden; transition: transform 0.3s; }
  .card:hover { transform: scale(1.05); }
  .card img { width: 100%; height: 350px; object-fit: cover; }
  .card h3 { padding: 15px; font-size: 1.2rem; }
</style>
</head>
<body>

<!-- Navbar -->
<nav>
  <div class="imagem"><img src="logo.png" alt=""></div>
  <div class="logo">The Book's On The Table</div>
  <ul>
    <li><a href="#">Home</a></li>
    <li><a href="mostrar.html">Catálogo</a></li>
    <li><a href="catalogo.html">Adicionar Livros</a></li>
  </ul>
</nav>

<!-- Carrossel -->
<div class="banner-container">
  <div class="banner" id="banner"></div>
  <button class="banner-btn prev" onclick="prevBanner()">&#10094;</button>
  <button class="banner-btn next" onclick="nextBanner()">&#10095;</button>
</div>

<!-- Últimos lançamentos -->
<div class="section">
  <h2>Últimos Lançamentos</h2>
  <div class="livros-grid" id="livros-grid"></div>
</div>

<script>
const banner = document.getElementById("banner");
const livrosGrid = document.getElementById("livros-grid");
let index = 0;

// Buscar livros do JSON Server
async function fetchBooks() {
  try {
    const res = await fetch('http://localhost:3001/books');
    const books = await res.json();

    // Carrossel
    banner.innerHTML = '';
    books.forEach(book => {
      const img = document.createElement('img');
      img.src = book.cover || 'https://via.placeholder.com/900x400?text=Sem+Capa';
      img.alt = book.title;
      banner.appendChild(img);
    });

    // Grid de lançamentos
    livrosGrid.innerHTML = '';
    books.forEach(book => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <img src="${book.cover || 'https://via.placeholder.com/350x350?text=Sem+Capa'}" alt="${book.title}">
        <h3>${book.title}</h3>
      `;
      livrosGrid.appendChild(card);
    });
    
  } catch(err) {
    console.error('Erro ao buscar livros:', err);
  }
}

// Carrossel
function showBanner() {
  banner.style.transform = `translateX(${-index * 100}%)`;
}
function nextBanner() {
  if(banner.children.length === 0) return;
  index = (index + 1) % banner.children.length;
  showBanner();
}
function prevBanner() {
  if(banner.children.length === 0) return;
  index = (index - 1 + banner.children.length) % banner.children.length;
  showBanner();
}

// Inicial
fetchBooks();
setInterval(nextBanner, 5000);
</script>

</body>
</html>